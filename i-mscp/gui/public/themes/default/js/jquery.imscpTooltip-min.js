// See jquery.imscpTooltip-dev.js
(function(a){function o(d){function i(){b.parent.removeClass(f.extraClass).hide().css("opacity","")}if(e){clearTimeout(e)}c=null;var f=h(this);if((!g||!a.fn.bgiframe)&&f.fade){if(b.parent.is(":animated")){b.parent.stop().fadeTo(f.fade,0,i)}else{b.parent.stop().fadeOut(f.fade,i)}}else{i()}}function n(){return{x:a(window).scrollLeft(),y:a(window).scrollTop(),cx:a(window).width(),cy:a(window).height()}}function m(d){if(d&&d.target.tagName=="OPTION"){return}if(!f&&b.parent.is(":visible")){a(document.body).unbind("mousemove",m)}if(c==null){a(document.body).unbind("mousemove",m);return}b.parent.removeClass("viewport-right").removeClass("viewport-bottom");var e=b.parent[0].offsetLeft;var g=b.parent[0].offsetTop;if(d){e=d.pageX+h(c).left;g=d.pageY+h(c).top;var i="auto";if(h(c).positionLeft){i=a(window).width()-e;e="auto"}b.parent.css({left:e,right:i,top:g})}var j=n(),k=b.parent[0];if(j.x+j.cx<k.offsetLeft+k.offsetWidth){e-=k.offsetWidth+20+h(c).left;b.parent.css({left:e+"px"}).addClass("viewport-right")}if(j.y+j.cy<k.offsetTop+k.offsetHeight){g-=k.offsetHeight+20+h(c).top;b.parent.css({top:g+"px"}).addClass("viewport-bottom")}}function l(){e=null;if((!g||!a.fn.bgiframe)&&h(c).fade){if(b.parent.is(":animated")){b.parent.stop().show().fadeTo(h(c).fade,c.tOpacity)}else{b.parent.is(":visible")?b.parent.fadeTo(h(c).fade,c.tOpacity):b.parent.fadeIn(h(c).fade)}}else{b.parent.show()}m()}function k(){if(this==c||!this.tooltipText){return}c=this;d=this.tooltipText;b.body.html(d).show();b.parent.addClass(h(this).extraClass);j.apply(this,arguments)}function j(b){if(h(this).delay){e=setTimeout(l,h(this).delay)}else{l()}f=!h(this).followCursor;a(document.body).bind("mousemove",m);m(b)}function i(c){if(b.parent){return}b.parent=a('<div id="'+c.id+'"><div class="tooltipBody"></div></div>').appendTo(document.body).hide();if(a.fn.bgiframe){b.parent.bgiframe()}b.body=a("div.tooltipBody",b.parent)}function h(b){return a.data(b,"imscpTooltip")}var b={},c,d,e,f=true,g=a.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent);a.imscpTooltip={defaultsSettings:{msg:"",opacity:.85,top:10,left:10,delay:200,fade:true,extraClass:"",id:"imscpTooltip"}};a.fn.extend({imscpTooltip:function(c){settings=a.extend({},a.imscpTooltip.defaultsSettings,c);i(settings);return this.each(function(){if(settings.msg||this.title){a.data(this,"imscpTooltip",settings);this.tOpacity=b.parent.css("opacity");this.tooltipText=settings.msg||this.title;a(this).removeAttr("title");this.alt="";a(this).mouseover(k).mouseout(o).click(o)}})}})})(jQuery)
